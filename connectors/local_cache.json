{
  "local_cache": {
    "version": "1.0.0",
    "canonical_source": "local_mirror",
    "description": "Offline mirror cache for ACI core artifacts used when canonical GitHub endpoints are unreachable.",
    "repo": "aliasnet/aci",
    "location_strategy": {
      "environment_variable": {
        "name": "ACI_LOCAL_MIRROR_ROOT",
        "required": false,
        "notes": "When set, ${ACI_LOCAL_MIRROR_ROOT}/aliasnet/aci is treated as the root directory for synchronized local mirrors."
      },
      "relative_paths": [
        {
          "base": "{repo_root}",
          "path": "memory/local_cache/aliasnet/aci",
          "requires_provisioning": true,
          "notes": "Provisioned by the mirror sync job; ignored until populated with validated artifacts."
        }
      ],
      "resolution_order": [
        "environment_variable",
        "relative_paths"
      ],
      "template_tokens": {
        "mirror_root": "Resolved absolute path to the mirror root derived from the environment variable or provisioned relative path."
      }
    },
    "rules": {
      "sync_policy": {
        "requires_manual_approval": true,
        "chatgpt_connector": false,
        "notes": "Local cache is only served after successful checksum and freshness validation."
      },
      "allowed_extensions": [
        ".json",
        ".txt",
        ".jsonl"
      ]
    },
    "priority": "local_only_when_canonical_unavailable",
    "notes": "Local cache is a last resort fallback. Canonical GitHub remains the source of truth per sanity.md governance rules.",
    "sanity": {
      "checksum_validation": {
        "hash_algorithm": "sha256",
        "manifest_name": "checksums.sha256.json",
        "required": true,
        "action_on_missing": "reject_and_request_canonical",
        "notes": "Each cached file must have a corresponding sha256 entry. Missing or mismatched checksums trigger a canonical fetch instead of serving stale content."
      },
      "freshness_policy": {
        "max_age_hours": 6,
        "measure_against": "file_mtime",
        "action_on_stale": "reject_and_request_canonical",
        "notes": "Reject caches older than 6 hours to prevent drift, satisfying the 'Canonical override by local fallback' guardrail in sanity.md."
      },
      "audit": {
        "log_event": "mirror.local_cache.validation",
        "fields": [
          "file",
          "checksum_status",
          "freshness_status",
          "timestamp",
          "action"
        ],
        "notes": "All validation outcomes must be logged for TVA review to preserve auditability."
      }
    },
    "aci_resolution_instruction": {
      "instruction": "Resolve artifacts from synchronized local mirrors only after verifying checksum and freshness. If validation fails, escalate to canonical resolver.",
      "scope": {
        "repository": "aliasnet/aci",
        "mirror_hint": "Use the environment-configured mirror root or provisioned memory/local_cache path when available.",
        "source": "file://local_mirror"
      },
      "policy": {
        "retry": {
          "max_attempts": 1,
          "interval_seconds": 0
        },
        "resolve_order": "validate_local_then_return",
        "on_failure": {
          "action": "fallback_to_connector",
          "target": "github_connector",
          "alert": "mirror.validation_failed"
        }
      },
      "output": {
        "report": "validation_status",
        "channel": "current_chat",
        "format": "summary"
      }
    },
    "link_index": {
      "README.md": "{mirror_root}/README.md",
      "aci_runtime.json": "{mirror_root}/aci_runtime.json",
      "entities.json": "{mirror_root}/entities.json",
      "connectors/github_connector.json": "{mirror_root}/connectors/github_connector.json",
      "entities/bifrost/bifrost.json": "{mirror_root}/entities/bifrost/bifrost.json"
    },
    "signatures": {
      "required": [
        "TVA",
        "Sentinel"
      ],
      "notes": "Local cache must be signed by TVA and Sentinel to ensure governance oversight before activation."
    },
    "changelog": [
      {
        "version": "1.0.0",
        "date": "2024-10-24",
        "changes": [
          "Initial introduction of local cache connector with checksum and freshness guardrails."
        ]
      }
    ]
  }
}
